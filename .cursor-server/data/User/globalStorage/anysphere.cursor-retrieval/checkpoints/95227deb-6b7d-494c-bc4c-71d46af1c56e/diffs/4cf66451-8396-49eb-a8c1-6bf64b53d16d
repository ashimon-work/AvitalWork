{"fsPath":"\\home\\racheli\\project\\backend\\api\\src\\products\\products.service.ts","fileUuid":"4cf66451-8396-49eb-a8c1-6bf64b53d16d","fileSizeBytes":23676,"numLines":742,"diffChanges":[{"originalStartLineNumberOneIndexed":222,"originalEndLineNumberExclusiveOneIndexed":223,"modifiedStartLineNumberOneIndexed":222,"modifiedEndLineNumberExclusiveOneIndexed":237,"addedLines":["      // Use subquery approach for ManyToMany filtering - more reliable","      const subQuery = this.productsRepository","        .createQueryBuilder('p')","        .select('p.id')","        .innerJoin('p.categories', 'cat', 'cat.id = :categoryId', {","          categoryId: params.category_id,","        })","        .where('p.isActive = :isActive', { isActive: true });","","      if (params.storeSlug) {","        subQuery","          .innerJoin('p.store', 's')","          .andWhere('s.slug = :storeSlug', { storeSlug: params.storeSlug });","      }",""],"tokenizedAddedLines":[1000455,1000456,1000457,1000458,1000459,1000460,1000461,1000462,25,166,1000463,1000464,1000465,71,25]},{"originalStartLineNumberOneIndexed":225,"originalEndLineNumberExclusiveOneIndexed":232,"modifiedStartLineNumberOneIndexed":239,"modifiedEndLineNumberExclusiveOneIndexed":239},{"originalStartLineNumberOneIndexed":234,"originalEndLineNumberExclusiveOneIndexed":239,"modifiedStartLineNumberOneIndexed":241,"modifiedEndLineNumberExclusiveOneIndexed":243,"addedLines":["        .where(`product.id IN (${subQuery.getQuery()})`)","        .setParameters(subQuery.getParameters());"],"tokenizedAddedLines":[1000466,1000467]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}