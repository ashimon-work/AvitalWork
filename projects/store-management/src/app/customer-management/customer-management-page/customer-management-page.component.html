<!-- Customer Management Page -->
<div class="customer-management-container">
  <h1>Customer Management</h1>

  <!-- Action Bar -->
  <div class="action-bar d-flex justify-content-between align-items-center mb-3">
    <div class="search-filter d-flex align-items-center">
      <input type="text" class="form-control me-2" placeholder="Search customers" [(ngModel)]="searchTerm" (input)="onSearchTermChange($event)">
      <select class="form-select me-2" [(ngModel)]="selectedFilter" (change)="onFilterChange($event)">
        <option value="">All Customers</option>
        <option value="purchase-history">Purchase History</option>
        <option value="signup-date">Signup Date</option>
        <option value="status">Account Status</option>
      </select>
      <button class="btn btn-secondary me-2" (click)="exportCustomers()" [disabled]="isExporting">
        {{ isExporting ? 'Exporting...' : 'Export' }}
      </button>
      <button class="btn btn-outline-secondary">Customer Segmentation</button>
    </div>
  </div>

  <!-- Customers Table -->
  <div class="customers-table-container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th (click)="sortCustomers('name')">Name <span *ngIf="sortColumn === 'name'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('email')">Email <span *ngIf="sortColumn === 'email'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('phone')">Phone <span *ngIf="sortColumn === 'phone'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('location')">Location <span *ngIf="sortColumn === 'location'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('ordersCount')">Orders <span *ngIf="sortColumn === 'ordersCount'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('totalSpent')">Total Spent <span *ngIf="sortColumn === 'totalSpent'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('lastOrderDate')">Last Order <span *ngIf="sortColumn === 'lastOrderDate'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th (click)="sortCustomers('accountStatus')">Status <span *ngIf="sortColumn === 'accountStatus'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span></th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Customer rows will be dynamically loaded -->
        <tr *ngFor="let customer of customers">
          <td>{{ customer.name }}</td> <!-- Assuming customer has name -->
          <td>{{ customer.email }}</td> <!-- Assuming customer has email -->
          <td>{{ customer.phone || 'N/A' }}</td> <!-- Assuming customer has phone -->
          <td>{{ customer.location || 'N/A' }}</td> <!-- Assuming customer has location -->
          <td>{{ customer.ordersCount || 0 }}</td> <!-- Assuming customer has ordersCount -->
          <td>{{ customer.totalSpent | currency }}</td> <!-- Assuming customer has totalSpent -->
          <td>{{ customer.lastOrderDate ? (customer.lastOrderDate | date: 'shortDate') : 'N/A' }}</td> <!-- Assuming customer has lastOrderDate -->
          <td>{{ customer.accountStatus || 'N/A' }}</td> <!-- Assuming customer has accountStatus -->
          <td>
            <button class="btn btn-sm btn-info me-1">View</button>
            <button class="btn btn-sm btn-secondary me-1">Edit</button>
            <button class="btn btn-sm btn-danger">Contact</button>
          </td>
        </tr>
        <!-- Rows will be dynamically generated by *ngFor -->
      </tbody>
    </table>
  </div>

  <!-- Pagination Controls -->
  <div class="pagination-controls d-flex justify-content-between align-items-center mt-3">
    <div class="customers-count-summary">
      <p>Showing X to Y of Z customers</p> <!-- Placeholder -->
    </div>
    <div>
      <button class="btn btn-secondary me-1">Previous</button>
      <span>Page 1 of X</span> <!-- Placeholder -->
      <button class="btn btn-secondary ms-1">Next</button>
    </div>
  </div>

  <!-- Customer Details Modal Placeholder -->
  <div class="modal fade" id="customerDetailsModal" tabindex="-1" aria-labelledby="customerDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="customerDetailsModalLabel">Customer Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Customer details content will go here -->
          <p>Details for customer: {{ selectedCustomer?.name }}</p> <!-- Assuming selectedCustomer exists -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save Changes</button>
        </div>
      </div>
    </div>
  </div>
</div>