<h3>{{ tKeys.SF_ACCOUNT_ORDERS_TITLE | translate }}</h3>

<!-- Loading Indicator -->
<div *ngIf="isLoading$ | async" class="loading-indicator">{{ tKeys.SF_ACCOUNT_ORDERS_LOADING | translate }}</div>

<!-- New Account Orders Section -->
<ng-container *ngIf="transformedOrders$ | async as transformedOrders">
  <app-account-orders-section
    [orders]="transformedOrders"
    (viewOrder)="onViewOrder($event)"
    (downloadInvoice)="onDownloadInvoice($event)">
  </app-account-orders-section>
  <!-- The app-account-orders-section handles the 'no orders' case internally -->
</ng-container>

<!-- Pagination Controls - Retained from original, to control data passed to the section -->
<nav *ngIf="totalPages$ | async as totalPagesValue" aria-label="Order Pagination" class="mt-4">
  <ng-container *ngIf="totalPagesValue > 1">
    <ul class="pagination justify-content-center">
    <li class="page-item" [class.disabled]="currentPage === 1">
      <a class="page-link" href="javascript:void(0)" (click)="goToPage(currentPage - 1)">{{ tKeys.SF_ACCOUNT_ORDERS_PAGINATION_PREV | translate }}</a>
    </li>
    <ng-container *ngIf="totalPages$ | async as totalPages">
      <ng-container *ngFor="let pageNum of [].constructor(totalPages); let i = index">
        <li class="page-item" [class.active]="currentPage === (i + 1)">
          <a class="page-link" href="javascript:void(0)" (click)="goToPage(i + 1)">{{ i + 1 }}</a>
        </li>
      </ng-container>
    </ng-container>
    <li class="page-item" [class.disabled]="currentPage === (totalPages$ | async)">
      <a class="page-link" href="javascript:void(0)" (click)="goToPage(currentPage + 1)">{{ tKeys.SF_ACCOUNT_ORDERS_PAGINATION_NEXT | translate }}</a>
    </li>
  </ul>
  <p *ngIf="totalPagesValue" class="text-center text-muted">
    {{ paginationSummaryText }}
  </p>
  </ng-container>
</nav>

<!-- Error Message Area (Optional) -->
<!-- <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div> -->
