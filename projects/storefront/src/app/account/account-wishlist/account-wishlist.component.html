<h3>{{ tKeys.SF_ACCOUNT_WISHLIST_TITLE | translate }}</h3>

<!-- Loading Indicator -->
<div *ngIf="isLoading" class="loading-indicator">{{ tKeys.SF_ACCOUNT_WISHLIST_LOADING | translate }}</div>

<!-- Success/Error Messages -->
<div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
<div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

<!-- Wishlist Items Grid -->
<ng-container *ngIf="(items$ | async) as items">
  <div *ngIf="items.length > 0; else noItems" class="wishlist-grid">
    <div *ngFor="let item of items" class="wishlist-item-card">
      <a [routerLink]="['/product', item.productId]" class="product-image-link">
        <!-- Use a placeholder if imageUrl is missing -->
        <img [src]="item.product.imageUrls?.[0] || 'https://via.placeholder.com/150'"
             [alt]="item.product.name || (tKeys.SF_ACCOUNT_WISHLIST_PRODUCT_IMAGE_ALT | translate)"
             class="product-image">
      </a>
      <div class="product-details">
        <h5 class="product-name">
          <a [routerLink]="['/product', item.productId]">{{ item.product.name || (tKeys.SF_ACCOUNT_WISHLIST_PRODUCT_NAME_UNAVAILABLE | translate) }}</a>
        </h5>
        <p class="product-price">{{ item.product.price | currency }}</p>
        <p class="added-date"><small>{{ tKeys.SF_ACCOUNT_WISHLIST_ADDED_ON | translate }}{{ item.addedAt | date:'shortDate' }}</small></p>
      </div>
      <div class="item-actions">
        <button (click)="addToCart(item)" class="btn btn-sm btn-success me-2" [disabled]="isLoading">{{ tKeys.SF_ACCOUNT_WISHLIST_ADD_TO_CART_BUTTON | translate }}</button>
        <button (click)="removeItem(item.id)" class="btn btn-sm btn-outline-danger" [disabled]="isLoading">{{ tKeys.SF_ACCOUNT_WISHLIST_REMOVE_BUTTON | translate }}</button>
      </div>
    </div>
  </div>

  <ng-template #noItems>
    <p>{{ tKeys.SF_ACCOUNT_WISHLIST_EMPTY_MESSAGE | translate }}</p>
    <!-- Optional: Link to shop -->
    <!-- <a routerLink="/shop" class="btn btn-primary">{{ tKeys.SF_ACCOUNT_WISHLIST_START_SHOPPING_BUTTON | translate }}</a> -->
  </ng-template>
</ng-container>
