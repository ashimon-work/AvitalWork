<div class="min-h-screen bg-background">
  <div class="container-inner">
    
    <div class="page-header">
      <nav class="breadcrumb">
        <a routerLink="/">דף הבית</a>
        <span>/</span>
        <span class="current">הרשמה</span>
      </nav>
      <h1 class="text-display">הרשמה</h1>
      <hr class="separator" />
    </div>

    <div class="max-w-2xl">
      <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="space-y-6" novalidate>
<div class="form-group">
  <label for="firstName" class="input-label">{{ tKeys.SF_REGISTRATION_FIRST_NAME_LABEL | translate }}</label>
  <input id="firstName" type="text" formControlName="firstName" class="custom-input"
         [placeholder]="tKeys.SF_REGISTRATION_FIRST_NAME_LABEL | translate"
         [ngClass]="{ 'is-invalid': firstName?.invalid && (firstName?.dirty || firstName?.touched) }">
  <div *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)" class="invalid-feedback">
    <small>{{ tKeys.SF_REGISTRATION_FIRST_NAME_REQUIRED_ERROR | translate }}</small>
  </div>
</div> <div class="form-group">
  <label for="lastName" class="input-label">{{ tKeys.SF_REGISTRATION_LAST_NAME_LABEL | translate }}</label>
  <input id="lastName" type="text" formControlName="lastName" class="custom-input"
         [placeholder]="tKeys.SF_REGISTRATION_LAST_NAME_LABEL | translate"
         [ngClass]="{ 'is-invalid': lastName?.invalid && (lastName?.dirty || lastName?.touched) }">
  <div *ngIf="lastName?.invalid && (lastName?.dirty || lastName?.touched)" class="invalid-feedback">
    <small>{{ tKeys.SF_REGISTRATION_LAST_NAME_REQUIRED_ERROR | translate }}</small>
  </div>
</div>

        <div class="form-group">
          <label for="email" class="input-label">{{ tKeys.SF_REGISTRATION_EMAIL_LABEL | translate }}</label>
          <input id="email" type="email" formControlName="email" class="custom-input"
                 [placeholder]="tKeys.SF_REGISTRATION_EMAIL_LABEL | translate"
                 [ngClass]="{ 'is-invalid': email?.invalid && (email?.dirty || email?.touched) }">
          <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="invalid-feedback">
            <small *ngIf="email?.errors?.['required']">{{ tKeys.SF_LOGIN_PAGE_EMAIL_REQUIRED_ERROR | translate }}</small>
            <small *ngIf="email?.errors?.['email']">{{ tKeys.SF_LOGIN_PAGE_EMAIL_INVALID_ERROR | translate }}</small>
            <small *ngIf="email?.errors?.['emailExists']">{{ tKeys.SF_REGISTRATION_EMAIL_EXISTS_ERROR | translate }}</small>
          </div>
        </div>

        <div class="form-group">
          <label for="password" class="input-label">{{ tKeys.SF_REGISTRATION_PASSWORD_LABEL | translate }}</label>
          <input id="password" type="password" formControlName="password" class="custom-input"
                 [placeholder]="tKeys.SF_REGISTRATION_PASSWORD_LABEL | translate"
                 [ngClass]="{ 'is-invalid': password?.invalid && (password?.dirty || password?.touched) }">
          <div *ngIf="password?.invalid && (password?.dirty || password?.touched)" class="invalid-feedback">
            <small *ngIf="password?.errors?.['required']">{{ tKeys.SF_REGISTRATION_PASSWORD_REQUIRED_ERROR | translate }}</small>
            <small *ngIf="password?.errors?.['minlength']">{{ tKeys.SF_REGISTRATION_PASSWORD_MINLENGTH_ERROR | translate: 8 }}</small>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword" class="input-label">{{ tKeys.SF_REGISTRATION_CONFIRM_PASSWORD_LABEL | translate }}</label>
          <input id="confirmPassword" type="password" formControlName="confirmPassword" class="custom-input"
                 [placeholder]="tKeys.SF_REGISTRATION_CONFIRM_PASSWORD_LABEL | translate"
                 [ngClass]="{ 'is-invalid': (confirmPassword?.invalid || registrationForm.hasError('passwordMismatch')) && (confirmPassword?.dirty || confirmPassword?.touched) }">
          <div *ngIf="(confirmPassword?.invalid || registrationForm.hasError('passwordMismatch')) && (confirmPassword?.dirty || confirmPassword?.touched)" class="invalid-feedback">
            <small *ngIf="registrationForm.hasError('passwordMismatch')">{{ tKeys.SF_REGISTRATION_PASSWORD_MISMATCH_ERROR | translate }}</small>
          </div>
        </div>

        <div class="form-group">
          <label for="phone" class="input-label">{{ tKeys.SF_REGISTRATION_PHONE_LABEL | translate }}</label>
          <input id="phone" type="tel" formControlName="phone" class="custom-input" 
                 placeholder="טלפון נייד"
                 [ngClass]="{ 'is-invalid': phone?.invalid && (phone?.dirty || phone?.touched) }">
          <div *ngIf="phone?.invalid && (phone?.dirty || phone?.touched)" class="invalid-feedback">
             <small>{{ tKeys.SF_REGISTRATION_PHONE_INVALID_ERROR | translate }}</small>
          </div>
        </div>

        <div class="checkbox-section">
          <label class="checkbox-container">
            <input type="checkbox" formControlName="newsletterOptIn">
            <span class="checkmark"></span>
            <span class="label-text">{{ tKeys.SF_REGISTRATION_NEWSLETTER_OPT_IN_LABEL | translate }}</span>
          </label>

          <div class="form-group-checkbox">
            <label class="checkbox-container" [ngClass]="{'has-error': terms?.invalid && (terms?.dirty || terms?.touched || submitted)}">
              <input type="checkbox" formControlName="terms">
              <span class="checkmark"></span>
              <span class="label-text">
                {{ tKeys.SF_REGISTRATION_TERMS_AGREE_TEXT | translate }} 
                <a href="/terms-and-conditions" target="_blank" class="link-bold">{{ tKeys.SF_REGISTRATION_TERMS_AND_CONDITIONS_LINK | translate }}</a>
              </span>
            </label>
            <div *ngIf="terms?.invalid && (terms?.dirty || terms?.touched || submitted)" class="invalid-feedback">
              <small>{{ tKeys.SF_REGISTRATION_TERMS_REQUIRED_ERROR | translate }}</small>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-button" [disabled]="isSubmitting">
            <span>{{ (isSubmitting ? tKeys.SF_REGISTRATION_SUBMIT_BUTTON_REGISTERING : tKeys.SF_REGISTRATION_SUBMIT_BUTTON_CREATE_ACCOUNT) | translate }}</span>
          </button>

          <div class="login-link-container">
            <span>{{ tKeys.SF_REGISTRATION_ALREADY_HAVE_ACCOUNT_TEXT | translate }}</span>
            <a [routerLink]="['../login']" class="link-bold">{{ tKeys.SF_REGISTRATION_LOGIN_LINK_TEXT | translate }}</a>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>