// Base Variables (copied for context, consider moving to a shared SCSS variables file if not already)
$primary-color: #E53E3E;
$text-gray-900: #1A202C;
$text-gray-700: #4A5568;
$text-gray-500: #718096;
$border-gray-300: #E2E8F0;
$background-gray-50: #F9FAFB;
$white-color: #fff;

// Styles moved from header.component.scss
:host {
  display: block; // Ensures the component takes up space
  position: relative; // For positioning the suggestions list absolutely within the search-bar
  width: 100%; // Search bar should take full width of its container in header
}

.custom-search-wrapper {
  position: relative; // For icon positioning
  display: flex;
  align-items: center;
  background-color: $background-gray-50;
  border: 1px solid $border-gray-300;
  border-radius: 24px; // Rounded corners for the wrapper
  height: 40px;
  padding: 0 0 0 16px; // Left padding for text, right padding handled by icons
  width: 100%;
  transition: border-color 0.2s ease-in-out;
  outline: none; // Remove default outline on wrapper

  &:focus-within { // Add back a subtle focus indicator on the wrapper
    border-color: $primary-color;
  }

  .custom-search-input {
    flex-grow: 1; // Input takes available space
    height: 100%;
    border: none;
    outline: none; // Remove default outline on input
    background-color: transparent;
    font-size: 0.9rem;
    color: $text-gray-900;
    padding: 0; // Remove default input padding

    &::placeholder {
      color: $text-gray-500;
      opacity: 1;
    }
  }

  .search-icon-suffix, .clear-icon-suffix {
    display: flex;
    align-items: center;
    justify-content: center;
    color: $text-gray-500;
    padding: 0 8px; // Padding around icons
    height: 100%;
    cursor: pointer; // Make search icon clickable to focus input
  }
  .clear-icon-suffix { // Specific for clear button if it's a mat-icon-button
    border-radius: 50%;
    color: $text-gray-500; // Explicitly set icon color
    &:hover {
      background-color: rgba(0,0,0,0.04);
    }
  }
}

.suggestions-list {
  position: absolute;
  top: 100%; // Position below the search input wrapper
  left: 0;
  right: 0;
  background-color: $white-color;
  border: 1px solid $border-gray-300;
  border-top: none; // Avoid double border with input
  border-radius: 0 0 8px 8px; // Rounded bottom corners
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  list-style: none;
  padding: 8px 0;
  margin: 0;
  z-index: 1001; // Ensure it's above other header content but below modals if any
  max-height: 300px;
  overflow-y: auto;

  .suggestion-item {
    padding: 0; // Remove padding, link will handle it
    cursor: pointer;

    // Styles for the link within the list item for better click handling and layout
    .suggestion-link {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      text-decoration: none;
      color: $text-gray-700;
      transition: background-color 0.2s ease;

      &:hover {
        background-color: $background-gray-50;
        color: $text-gray-900;
      }

      &.product-suggestion {
        // Specific styles if needed
      }
      &.store-suggestion {
        // Specific styles if needed
      }
    }


    &.active { // Style for the active list item (keyboard navigation)
      // The link itself will get hover, but li.active can have a distinct style if needed
      // For example, a subtle border or different background on the li itself.
      // For now, relying on link hover/focus for visual cue.
      // If direct styling on li.active is needed:
       background-color: rgba($primary-color, 0.05); // Lighter than hover for distinction
       .suggestion-link { // Ensure link text is still prominent
         color: $primary-color; // Or $text-gray-900 if preferred
       }
    }

    .suggestion-image {
      width: 40px;
      height: 40px;
      object-fit: cover;
      margin-right: 12px;
      border-radius: 4px;
      border: 1px solid $border-gray-300; // Subtle border for images
    }
    .suggestion-image-placeholder {
      width: 40px;
      height: 40px;
      margin-right: 12px;
      border-radius: 4px;
      background-color: $background-gray-50;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      color: $text-gray-500;
      border: 1px solid $border-gray-300;
    }

    .suggestion-details {
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-width: 0; // Allow text to truncate
    }

    .suggestion-name {
      font-size: 0.9rem;
      font-weight: 500;
      color: $text-gray-900;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .suggestion-price {
      font-size: 0.8rem;
      color: $text-gray-700;
    }
    .suggestion-description {
      font-size: 0.8rem;
      color: $text-gray-500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
}
