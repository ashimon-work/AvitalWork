// Using global variables defined in src/styles.scss

:host {
  display: block; // Ensure the component takes up block space
}

.store-header {
  background-color: var(--background-color);
  border-bottom: var(--border-width) solid var(--border-color);
  padding: var(--spacing-sm) 0; // Vertical padding, horizontal handled by container
  position: sticky; // Make header sticky
  top: 0;
  z-index: 1000; // Ensure it stays above other content
  box-shadow: var(--box-shadow-sm); // Subtle shadow for separation
}

.header-container {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--spacing-lg); // Space between logo, nav, right section

  // Apply container constraints
  width: 100%;
  max-width: var(--container-max-width);
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--container-padding-x);
  padding-left: var(--container-padding-x);
}

.logo {
  flex-shrink: 0; // Prevent logo from shrinking

  a {
    display: inline-block; // Ensures link wraps the image correctly
    line-height: 0; // Remove extra space below image if any
  }

  img {
    height: 40px; // Adjust height as needed, maintain aspect ratio
    width: auto; // Let width adjust automatically
    vertical-align: middle; // Align image nicely if there's text nearby
  }
}

.navigation {
  flex-grow: 1; // Allow navigation to take up available space
  display: flex;
  justify-content: center; // Center navigation links (adjust if needed)
}

.header-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex-shrink: 0;
  flex-wrap: wrap;
  justify-content: flex-end; /* Align items to the end of the container */
}

.search-bar {
  // Placeholder: Specific styling will be in search-bar.component.scss
  // Might need width constraints here depending on the search bar's internal styling
  max-width: 300px; // Example constraint
}

.user-actions {
  display: flex;
  align-items: center;
  margin-left: 0px;
  gap: var(--spacing-md); // Space between icons
}

.action-icon {
  color: var(--text-color); // Use default text color for icons
  text-decoration: none;
  position: relative; // For positioning the cart count badge
  display: flex; // Helps center the icon vertically if needed
  align-items: center;
  padding: var(--spacing-xs); // Small padding for better click area
  border-radius: 50%; // Make it circular on hover/focus

  &:hover,
  &:focus {
    color: var(--primary-color); // Change color on hover/focus
    background-color: var(--neutral-lightest); // Subtle background
    text-decoration: none; // Remove underline
    opacity: 1; // Override default link opacity hover
    outline: none; // Remove default focus outline if needed
  }

  .material-icons {
    font-size: 24px; // Standard icon size
    vertical-align: middle;
  }
}

.cart-count {
  position: absolute;
  top: -5px; // Adjust position relative to the icon
  right: -8px; // Adjust position relative to the icon
  background-color: var(--error-color); // Use error/alert color for emphasis
  color: white;
  font-size: 11px;
  font-weight: var(--font-weight-medium);
  border-radius: 50%;
  padding: 2px 5px;
  line-height: 1;
  min-width: 18px; // Ensure it's roughly circular even for single digits
  text-align: center;
}

// Hamburger Button Styles (Hidden on Desktop)
.hamburger-button {
  display: block; // Visible by default
  margin-left: 0px; /* Push to the right */
  background: none;
  border: none;
  padding: var(--spacing-xs);
  cursor: pointer;
  color: var(--text-color);

  .material-icons {
    font-size: 28px; // Larger icon for touch
    vertical-align: middle;
  }

  &:hover,
  &:focus {
    color: var(--primary-color);
    background-color: var(--neutral-lightest);
    border-radius: 50%;
    outline: none;
  }
}

// Mobile Menu Container Styles (Hidden on Desktop)
.mobile-menu-content {
  display: none; // Hidden by default
}


// Responsive adjustments
@media (max-width: 768px) {
  .header-container {
    gap: var(--spacing-xs); // Further reduce gap
    padding-right: var(--spacing-xs); // Further reduce padding
    padding-left: var(--spacing-xs); // Further reduce padding
    position: relative; // Needed for absolute positioning of the menu
  }

  // Reduce logo size on mobile
  .logo img {
    height: 30px; // Smaller logo height
  }

  // Hide original nav and search bar (now inside mobile menu)
  .navigation,
  .search-bar {
    display: none;
  }

  // Show hamburger button
  .hamburger-button {
    display: block !important;

    .material-icons {
      font-size: 18px; // Smaller menu icon
    }
  }

  // Keep user actions visible, adjust gap
  .header-right {
    /* order: 2; // Place user actions before hamburger */
    gap: var(--spacing-xs); // Further reduce gap between user actions and hamburger
    flex-wrap: nowrap;
    justify-content: flex-end; // Keep this alignment
    flex-grow: 1; /* Allow it to take up available space */

    .action-icon .material-icons {
      font-size: 18px;
    }

    .user-actions {
      gap: var(--spacing-xxs); // Reduce gap even further
      font-size: 0.6rem; // Even smaller font size for all text
    }
  }
}

// Style the mobile menu container
.mobile-menu-content {
  display: none; // Hidden by default
  position: absolute;
  top: 100%; // Position below the header
  left: 0;
  right: 0;
  background-color: var(--background-color);
  border-top: var(--border-width) solid var(--border-color);
  box-shadow: var(--box-shadow-md);
  padding: var(--spacing-md);
  z-index: 999; // Below header but above page content

  // Show when open
  &.open {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  // Ensure nav and search display correctly inside the menu
  .navigation,
  .search-bar {
    display: block; // Show them inside the menu
    width: 100%; // Take full width
    max-width: none; // Remove previous max-width constraint on search
    margin-bottom: var(--spacing-sm); // Add some spacing
  }

  // Adjust navigation styles for vertical layout if needed
  .navigation {
    // Example: If app-navigation uses flex row, change it
    // ::ng-deep ul { flex-direction: column; align-items: flex-start; }
    justify-content: flex-start; // Align items to the start
  }

  .action-link {
    font-size: 1.15rem; // Smaller font size for mobile
  }

  .action-icon {
    padding: var(--spacing-xxs); // Even smaller padding
  }

  .user-actions {
    gap: var(--spacing-xxs); // Reduce gap even further
  }

  .cart-count {
    font-size: 0.7rem; // Reduce cart count font size
  }
}

// Define extra small spacing variable if it doesn't exist
:root {
  --spacing-xxs: calc(0.25 * var(--spacing-unit)); // 2px
}