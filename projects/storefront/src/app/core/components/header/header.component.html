<header class="store-header">
  <div class="header-container">
    <!-- Store Logo -->
    <div class="logo">
      <a [routerLink]="['/awesome-gadgets']" *ngIf="currentStoreSlug$ | async as storeSlug"> <!-- Logo link always points to awesome-gadgets -->
        <!-- Placeholder for logo image -->
        <img src="https://via.placeholder.com/150x40?text=Logo" alt="Store Logo" style="width: 150px;">
      </a>
    </div>

    <!-- Collapsible Menu Content (Nav + Search) -->
    <div class="mobile-menu-content" [class.open]="isMobileMenuOpen$ | async">
      <app-navigation class="navigation"></app-navigation>
      <!-- Search bar moved to header-right for desktop -->
    </div>

    <!-- Right Section: User Actions (Always Visible) -->
    <div class="header-right">
      <!-- Search Bar for Desktop -->
      <app-search-bar class="search-bar desktop-search"></app-search-bar>
      <div class="user-actions" *ngIf="currentStoreSlug$ | async as storeSlug">
        <!-- Show Account/Cart/Logout if authenticated -->
        <ng-container *ngIf="isAuthenticated$ | async; else loggedOutActions">
          <a [routerLink]="['/', storeSlug, 'account']" class="action-icon" title="My Account">
            <span class="material-icons">person</span>
          </a>
          <a [routerLink]="['/', storeSlug, 'cart']" class="action-icon" title="Shopping Cart">
            <span class="material-icons">shopping_cart</span>
            <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
          </a>
          <button (click)="logout()" class="action-icon logout-button" title="Logout">
            <span class="material-icons">logout</span>
          </button>
        </ng-container>

        <!-- Show Login/Register if not authenticated -->
        <ng-template #loggedOutActions>
          <a [routerLink]="['/', storeSlug, 'login']" class="action-link" title="Login">Login</a>
          <a [routerLink]="['/', storeSlug, 'register']" class="action-link" title="Register">Register</a>
          <!-- Optionally show cart icon even when logged out -->
          <a [routerLink]="['/', storeSlug, 'cart']" class="action-icon" title="Shopping Cart">
            <span class="material-icons">shopping_cart</span>
            <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
          </a>
        </ng-template>
      </div>
    </div>

    <!-- Mobile Menu Toggle Button -->
    <button class="hamburger-button" (click)="toggleMobileMenu()">
      <span class="material-icons">menu</span>
    </button>
  </div>
</header>
